# PreProd Environment Configuration with MySQL on GCP
spring.datasource.url=jdbc:mysql://google/perundhu?socketFactory=com.google.cloud.sql.mysql.SocketFactory&cloudSqlInstance=${GCP_INSTANCE_CONNECTION_NAME}
spring.datasource.username=${MYSQL_USERNAME}
spring.datasource.password=${MYSQL_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Multipart file upload configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=15MB
spring.servlet.multipart.enabled=true

# Flyway configuration for pre-production
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration/mysql
spring.flyway.baseline-on-migrate=true
spring.flyway.clean-disabled=true
spring.flyway.validate-on-migrate=true

# Hibernate configuration for MySQL
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=${SHOW_SQL:false}

# Connection pool configuration
spring.datasource.hikari.maximum-pool-size=${HIKARI_MAX_POOL_SIZE:5}
spring.datasource.hikari.minimum-idle=${HIKARI_MIN_IDLE:2}

# Server configuration
server.port=${SERVER_PORT:8080}

# CORS Configuration for PreProd (allow frontend Cloud Run URL)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://perundhu-frontend-preprod-c6qn3mz4wa-el.a.run.app}

# Logging
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.com.perundhu=${LOG_LEVEL_APP:INFO}
logging.level.org.flywaydb=INFO