@tailwind base;
@tailwind components;
@tailwind utilities;

/* Essential base styles to prevent layout collapse */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#root {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Ensure containers have proper dimensions */
.app-container {
  min-height: 100vh !important;
  width: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Custom styles that extend Tailwind */
@layer components {
  /* Bottom Navigation Components */
  .bottom-navigation {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: white;
    border-top: 1px solid #e5e7eb;
    z-index: 9999; /* Ensure it's above everything */
    /* iOS safe area padding - use max() for better compatibility */
    padding-bottom: max(12px, env(safe-area-inset-bottom, 12px));
    padding-left: env(safe-area-inset-left, 0);
    padding-right: env(safe-area-inset-right, 0);
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
  }

  .bottom-nav-container {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 8px 4px;
    max-width: 100%;
    min-height: 60px;
  }

  .bottom-nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
    padding: 8px 8px;
    background: transparent;
    border: 0;
    cursor: pointer;
    transition: all 200ms;
    position: relative;
    min-width: 50px;
    flex: 1;
    max-width: 72px;
    border-radius: 8px;
    color: #6b7280;
    text-decoration: none;
  }

  .bottom-nav-item:not(.disabled):hover {
    background-color: #eff6ff;
  }

  .bottom-nav-item.active {
    color: #2563eb;
    background-color: #eff6ff;
  }

  .bottom-nav-item.disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .nav-icon {
    font-size: 20px;
    line-height: 1;
  }

  .nav-label {
    font-size: 11px;
    font-weight: 500;
    line-height: 1.2;
    white-space: nowrap;
  }

  .nav-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    background-color: #ef4444;
    color: white;
    font-size: 10px;
    border-radius: 50%;
    min-width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }

  /* Ensure main content has space for bottom navigation on mobile */
  @media (max-width: 768px) {
    .app-container {
      padding-bottom: 90px !important; /* Increased for iOS safe area */
    }
    
    main {
      padding-bottom: 90px !important;
    }
  }
  
  @media (min-width: 769px) {
    .app-container {
      padding-bottom: 0;
    }
  }

  /* Mobile-specific styles */
  @media (max-width: 768px) {
    .bottom-navigation {
      display: block !important;
    }
    
    .bottom-nav-item {
      padding: 6px 4px;
    }
    
    .nav-label {
      font-size: 10px;
    }
    
    .nav-icon {
      font-size: 18px;
    }
  }
  
  /* Small mobile devices */
  @media (max-width: 380px) {
    .bottom-nav-item {
      padding: 6px 2px;
      min-width: 44px;
    }
    
    .nav-label {
      font-size: 9px;
    }
    
    .nav-icon {
      font-size: 16px;
    }
  }

  /* Hide bottom navigation on desktop if needed */
  @media (min-width: 769px) {
    .bottom-navigation {
      display: none; /* Hide on desktop */
    }
    
    .app-container {
      padding-bottom: 0; /* Remove padding on desktop */
    }
  }

  /* Connecting Routes Component */
  .connecting-route-card {
    @apply bg-white rounded-lg shadow-md mb-6 p-6 cursor-pointer transition-all duration-300 
    hover:shadow-lg hover:-translate-y-1 border border-transparent hover:border-blue-100 
    dark:bg-gray-800 dark:hover:border-blue-800 dark:hover:shadow-blue-900/20;
  }

  .connecting-route-card.expanded {
    @apply shadow-xl ring-2 ring-blue-200 ring-opacity-50 dark:ring-blue-700 dark:ring-opacity-40;
  }

  .route-summary {
    @apply flex justify-between items-start gap-4 flex-wrap sm:flex-nowrap;
  }

  .route-main-info h3 {
    @apply text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100;
  }

  .route-wait-time {
    @apply mt-2 text-amber-600 font-medium flex items-center gap-1.5 dark:text-amber-500;
  }

  .route-duration {
    @apply text-blue-600 font-medium flex items-center gap-1.5 dark:text-blue-400;
  }

  .route-details {
    @apply mt-6 pt-6 border-t border-gray-200 dark:border-gray-700;
  }

  .connection-info {
    @apply mb-6 text-center;
  }

  .connection-info h4 {
    @apply text-base text-gray-600 font-medium;
  }

  .legs-container {
    @apply flex flex-col gap-6 relative md:flex-row md:items-center md:gap-4;
  }

  .leg-card {
    @apply flex-1 bg-gradient-to-br from-blue-50 to-white rounded-lg p-5 shadow-sm border-l-4 border-blue-600 
    hover:bg-blue-100 hover:from-blue-100 hover:to-blue-50 transition-colors duration-200
    dark:from-blue-900/20 dark:to-gray-800 dark:hover:from-blue-900/30 dark:border-blue-500;
  }

  .leg-card h4 {
    @apply text-blue-600 mb-4 pb-2 border-b border-dashed border-gray-300 font-medium;
  }

  .leg-details p {
    @apply mb-2 text-gray-700;
  }

  .bus-time {
    @apply flex justify-between mt-4 pt-4 border-t border-dashed border-gray-300;
  }

  .departure, .arrival {
    @apply flex flex-col items-center;
  }

  .departure span, .arrival span {
    @apply text-sm text-gray-600 mb-1;
  }

  .departure strong, .arrival strong {
    @apply text-base text-blue-600 font-semibold;
  }

  /* Header Component */
  .app-header {
    @apply sticky top-0 z-10 bg-white/90 backdrop-blur-md border-b border-gray-200 py-4 px-6 shadow-sm
    dark:bg-gray-900/90 dark:border-gray-800;
  }
  
  .header-content {
    @apply max-w-7xl mx-auto flex justify-between items-center flex-wrap gap-4;
  }

  .header-content h1 {
    @apply text-xl md:text-2xl font-semibold text-blue-600 dark:text-blue-400;
  }

  .header-actions {
    @apply flex justify-end items-center gap-4 flex-wrap;
  }

  .location-toggle {
    @apply flex items-center gap-2;
  }

  .toggle-switch {
    @apply relative inline-block w-12 h-6;
  }

  .toggle-switch input {
    @apply opacity-0 w-0 h-0;
  }

  .toggle-slider {
    @apply absolute cursor-pointer inset-0 bg-gray-300 rounded-full transition-all duration-300
    before:absolute before:content-[''] before:h-5 before:w-5 before:left-0.5 before:bottom-0.5 
    before:bg-white before:rounded-full before:transition-all before:duration-300
    dark:bg-gray-700;
  }

  .toggle-switch input:checked + .toggle-slider {
    @apply bg-blue-600;
  }

  .toggle-switch input:checked + .toggle-slider:before {
    @apply transform translate-x-6;
  }

  .toggle-label {
    @apply text-sm font-medium text-gray-700 dark:text-gray-300;
  }

  .home-link {
    @apply text-blue-600 hover:text-blue-700 font-medium dark:text-blue-400 dark:hover:text-blue-300;
  }

  /* Search Form Component */
  .search-form {
    @apply bg-white rounded-xl shadow-md p-6 mb-8 border border-gray-100
    dark:bg-gray-800 dark:border-gray-700;
  }

  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300;
  }

  .form-control {
    @apply w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
    transition-all duration-200 bg-white
    dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:border-blue-500;
  }

  .search-actions {
    @apply flex justify-between mt-6 items-center;
  }

  .search-button {
    @apply bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition-all duration-200
    hover:shadow-lg hover:shadow-blue-600/20
    dark:bg-blue-700 dark:hover:bg-blue-600;
  }

  /* Bus List Component */
  .bus-list {
    @apply divide-y divide-gray-200 dark:divide-gray-700;
  }

  .bus-list-header {
    @apply mb-4 flex justify-between items-center;
  }

  .bus-list-title {
    @apply text-xl font-semibold text-gray-800 dark:text-gray-100;
  }

  .bus-list-filters {
    @apply flex gap-2;
  }

  .filter-button {
    @apply px-3 py-1 text-sm rounded-full border border-gray-300 bg-white hover:bg-gray-100 transition-colors
    dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700;
  }

  .filter-button.active {
    @apply border-blue-500 bg-blue-50 text-blue-700
    dark:border-blue-600 dark:bg-blue-900/30 dark:text-blue-400;
  }

  .no-buses {
    @apply py-8 text-center text-gray-500 italic dark:text-gray-400;
  }
  
  .contribute-route-btn {
    @apply mt-4 flex items-center justify-center gap-2 text-sm font-medium px-4 py-2 rounded-lg 
    bg-yellow-50 text-yellow-700 border border-yellow-300 hover:bg-yellow-100 transition-all duration-200
    dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-700/50 dark:hover:bg-yellow-900/40;
  }

  .contribute-route-btn svg {
    @apply w-4 h-4;
  }

  .contribute-route-info {
    @apply text-sm text-gray-600 mt-2 dark:text-gray-400;
  }

  /* Bus Item Component */
  .bus-item {
    @apply py-4 animate-[fadeIn_0.3s_ease-in-out];
  }

  .bus-header {
    @apply flex justify-between items-start mb-2;
  }

  .bus-route {
    @apply text-lg font-medium text-gray-800 dark:text-gray-200;
  }

  .bus-number {
    @apply text-sm font-medium px-2 py-0.5 bg-blue-100 text-blue-800 rounded-md
    dark:bg-blue-900/50 dark:text-blue-300;
  }

  .bus-details {
    @apply flex flex-col gap-1 mt-2;
  }

  .bus-stops {
    @apply mt-4 space-y-2;
  }

  .stop-item {
    @apply flex justify-between items-center py-1 border-l-2 border-gray-300 pl-3
    dark:border-gray-700;
  }

  .stop-item.current {
    @apply border-green-500;
  }

  .stop-name {
    @apply text-gray-800 dark:text-gray-200;
  }

  .stop-times {
    @apply flex gap-2 text-sm;
  }

  .stop-time {
    @apply text-gray-500 dark:text-gray-400;
  }

  .stop-time.estimate {
    @apply font-medium text-green-600 dark:text-green-500;
  }

  /* Error Display Component */
  .error-container {
    @apply bg-red-50 border-l-4 border-red-500 p-4 rounded-md my-4
    dark:bg-red-900/20 dark:border-red-700;
  }

  .error-title {
    @apply text-red-800 font-medium mb-2 dark:text-red-400;
  }

  .error-message {
    @apply text-red-700 dark:text-red-300;
  }

  .error-retry {
    @apply mt-2 text-sm bg-white text-red-700 border border-red-300 hover:bg-red-50 px-3 py-1 rounded
    dark:bg-gray-800 dark:text-red-400 dark:border-red-700 dark:hover:bg-red-900/30;
  }

  /* Loading Component */
  .loading-container {
    @apply flex flex-col items-center justify-center py-12;
  }

  .loading-spinner {
    @apply w-12 h-12 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin
    dark:border-gray-700 dark:border-t-blue-500;
  }

  .loading-text {
    @apply mt-4 text-gray-600 font-medium dark:text-gray-400;
  }

  /* Footer Component */
  .app-footer {
    @apply mt-auto py-6 px-6 border-t border-gray-200
    dark:border-gray-800;
  }

  .footer-content {
    @apply max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4;
  }

  .footer-links {
    @apply flex gap-6 flex-wrap justify-center;
  }

  .footer-link {
    @apply text-sm text-gray-600 hover:text-gray-900
    dark:text-gray-400 dark:hover:text-gray-200;
  }

  .footer-copyright {
    @apply text-sm text-gray-500 dark:text-gray-500;
  }

  /* Offline Banner Component */
  .offline-banner {
    @apply fixed bottom-0 left-0 right-0 bg-yellow-500 text-yellow-900 p-3 text-center font-medium
    transform transition-transform duration-300 z-30;
  }

  .offline-banner.hidden {
    @apply translate-y-full;
  }

  /* Map Component Styles */
  .map-container {
    @apply relative w-full rounded-xl overflow-hidden shadow-lg h-[400px] md:h-[500px] border border-gray-100 
    dark:border-gray-700 transition-all duration-300 hover:shadow-xl;
  }

  .map-loading {
    @apply absolute inset-0 bg-white/80 backdrop-blur-sm flex justify-center items-center z-10 font-semibold text-blue-600;
  }

  .map-error {
    @apply p-4 bg-red-50 text-red-700 rounded-lg mb-4 text-center border border-red-100;
  }

  .wait-time-indicator {
    @apply flex justify-center items-center relative py-2;
  }

  .wait-time-badge {
    @apply bg-amber-50 border-2 border-amber-500 rounded-lg px-6 py-3 flex flex-col items-center shadow-sm;
  }

  .wait-time-badge span {
    @apply text-sm text-amber-700 mb-1;
  }

  .wait-time-badge strong {
    @apply text-base text-amber-700 font-bold;
  }

  /* Interactive Lists */
  .interactive-list > * {
    @apply animate-[slideIn_0.4s_ease-out_forwards] opacity-0;
  }

  .interactive-list > *:nth-child(1) { @apply [animation-delay:0.1s]; }
  .interactive-list > *:nth-child(2) { @apply [animation-delay:0.2s]; }
  .interactive-list > *:nth-child(3) { @apply [animation-delay:0.3s]; }
  .interactive-list > *:nth-child(4) { @apply [animation-delay:0.4s]; }
  .interactive-list > *:nth-child(5) { @apply [animation-delay:0.5s]; }

  /* Card Effects */
  .card {
    @apply bg-gradient-to-br from-white/20 to-white/5 backdrop-blur border border-white/20 shadow-md transition-all duration-300
    hover:shadow-lg hover:border-blue-200/50 hover:scale-[1.01]
    dark:from-white/5 dark:to-white/0 dark:border-white/5 dark:hover:border-blue-800/30;
  }

  /* Active States */
  .active {
    @apply relative text-blue-600 font-medium after:content-[''] after:absolute after:bottom-[-2px] after:left-0 
    after:w-full after:h-0.5 after:bg-current after:rounded-full after:transition-all after:duration-300
    dark:text-blue-400;
  }

  /* Focus States */
  .focus-style {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2
    focus-visible:ring-offset-white dark:focus-visible:ring-blue-400 dark:focus-visible:ring-offset-gray-900;
  }

  /* Loading States */
  .loading-skeleton {
    @apply bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:400%_100%] animate-[shimmer_2s_infinite] rounded
    dark:from-gray-700 dark:via-gray-600 dark:to-gray-700;
  }

  /* Language-specific styling */
  html.lang-ta .stop-name {
    @apply font-['Noto_Sans_Tamil','Latha',sans-serif] leading-relaxed py-0.5;
  }

  html.lang-ta .stop-times {
    @apply min-w-[110px];
  }

  html.lang-ta .departure span,
  html.lang-ta .arrival span,
  html.lang-ta .info-label {
    @apply font-['Noto_Sans_Tamil','Latha',sans-serif];
  }

  .stop-item .stop-times div {
    @apply text-right;
  }

  html.lang-ta {
    @apply text-[15px];
  }

  html.lang-ta .bus-item .bus-header {
    @apply pb-5;
  }

  /* Modern Language Switcher Component */
  .modern-language-switcher {
    @apply flex flex-col items-center gap-2;
  }

  .language-selector-wrapper {
    @apply relative bg-white rounded-2xl p-1.5 shadow-lg border border-gray-100
    dark:bg-gray-800 dark:border-gray-700 transition-all duration-300 hover:shadow-xl
    backdrop-blur-md bg-white/90 dark:bg-gray-800/90;
  }

  .language-selector {
    @apply relative flex z-20;
  }

  .lang-option {
    @apply relative flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300
    text-gray-600 hover:text-gray-800 bg-transparent border-none cursor-pointer
    dark:text-gray-400 dark:hover:text-gray-200 min-w-[110px] justify-start
    transform-gpu will-change-transform;
  }

  .lang-option:hover:not(.active) {
    @apply bg-gray-50/80 dark:bg-gray-700/50 scale-[1.02];
  }

  .lang-option.active {
    @apply text-white font-semibold transform scale-105 z-30 relative;
    color: white !important;
  }

  .lang-option.animating {
    @apply transition-all duration-500 ease-out;
  }

  /* Language icon styling */
  .lang-icon-container {
    @apply relative flex items-center justify-center w-8 h-8;
  }

  .lang-icon {
    @apply text-xl filter drop-shadow-sm transition-all duration-300 relative z-10;
  }

  .icon-glow {
    @apply absolute inset-0 rounded-full opacity-0 transition-all duration-300
    bg-gradient-to-br from-blue-400/20 to-purple-500/20 blur-sm;
  }

  .lang-option.active .icon-glow {
    @apply opacity-100 scale-150;
  }

  .lang-option.active .lang-icon {
    @apply transform scale-110 filter drop-shadow-lg;
  }

  /* Language text styling */
  .lang-text-container {
    @apply flex flex-col leading-tight;
  }

  .lang-name {
    @apply text-sm font-semibold tracking-wide;
  }

  .lang-code {
    @apply text-xs opacity-70 font-medium;
  }

  .lang-option.active .lang-code {
    @apply opacity-90 font-bold;
  }

  /* Active indicator */
  .active-indicator {
    @apply absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center justify-center;
  }

  .indicator-dot {
    @apply w-2 h-2 rounded-full bg-current opacity-0 transition-all duration-300 relative z-10;
  }

  .indicator-ripple {
    @apply absolute inset-0 rounded-full opacity-0 transition-all duration-500
    bg-current animate-ping;
  }

  .lang-option.active .indicator-dot {
    @apply opacity-100 scale-125;
  }

  .lang-option.active .indicator-ripple {
    @apply opacity-30;
  }

  /* Animated background slider */
  .bg-slider {
    @apply absolute top-1.5 bottom-1.5 w-[calc(50% - 6px)] rounded-xl transition-all duration-500 ease-out
    z-10 overflow-hidden;
  }

  .slider-gradient {
    @apply w-full h-full bg-gradient-to-br opacity-95 transition-all duration-500;
  }

  .bg-slider.slide-english {
    @apply left-1.5;
  }

  .bg-slider.slide-english .slider-gradient {
    @apply from-blue-500 via-blue-600 to-indigo-600
    shadow-lg shadow-blue-500/30;
  }

  .bg-slider.slide-tamil {
    @apply right-1.5 left-auto;
  }

  .bg-slider.slide-tamil .slider-gradient {
    @apply from-red-500 via-red-600 to-rose-600
    shadow-lg shadow-red-500/30;
  }

  /* Language status indicator */
  .language-status {
    @apply flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-full text-xs font-medium
    text-gray-600 border border-gray-200 transition-all duration-300
    dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600;
  }

  .status-dot {
    @apply w-2 h-2 rounded-full bg-green-500 animate-pulse;
  }

  .status-text {
    @apply font-medium tracking-wide;
  }

  /* Tamil font optimization */
  .lang-option[aria-label*="தமிழ்"] .lang-name {
    @apply font-['Noto_Sans_Tamil','Latha',sans-serif] leading-relaxed text-base;
  }

  .status-text {
    @apply font-['Noto_Sans_Tamil','Latha',sans-serif] when-tamil;
  }

  /* Mobile responsive design */
  @media (max-width: 640px) {
    .language-selector-wrapper {
      @apply w-full max-w-xs mx-auto;
    }

    .lang-option {
      @apply flex-1 min-w-0 px-3 py-2.5;
    }

    .lang-text-container {
      @apply items-center;
    }

    .lang-name {
      @apply text-xs;
    }

    .lang-code {
      @apply text-[10px];
    }

    .language-status {
      @apply px-2 py-1 text-xs;
    }

    .status-dot {
      @apply w-1.5 h-1.5;
    }
  }

  /* Tablet adjustments */
  @media (min-width: 641px) and (max-width: 1024px) {
    .lang-option {
      @apply px-3 py-2.5 min-w-[100px];
    }

    .lang-name {
      @apply text-sm;
    }
  }

  /* Desktop hover effects */
  @media (hover: hover) {
    .language-selector-wrapper:hover {
      @apply shadow-2xl border-blue-200 dark:border-blue-700;
    }

    .lang-option:hover:not(.active) .lang-icon {
      @apply transform scale-105;
    }

    .lang-option:hover:not(.active) .icon-glow {
      @apply opacity-50 scale-125;
    }
  }

  /* Focus states for accessibility */
  .lang-option:focus-visible {
    @apply outline-none ring-2 ring-blue-500 ring-offset-2 ring-offset-white
    dark:ring-blue-400 dark:ring-offset-gray-800 z-40;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .language-selector-wrapper {
      @apply border-2 border-gray-800 dark:border-gray-200;
    }

    .bg-slider.slide-english .slider-gradient {
      @apply from-blue-700 to-blue-800;
    }

    .bg-slider.slide-tamil .slider-gradient {
      @apply from-red-700 to-red-800;
    }

    .lang-option.active {
      @apply text-white font-bold;
    }

    .language-status {
      @apply border-2 border-gray-800 dark:border-gray-200;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .bg-slider,
    .lang-option,
    .icon-glow,
    .indicator-ripple,
    .status-dot {
      @apply transition-none animate-none;
    }

    .lang-option.active {
      @apply transform-none;
    }

    .status-dot {
      @apply animate-none;
    }
  }

  /* Dark mode enhancements */
  @media (prefers-color-scheme: dark) {
    .language-selector-wrapper {
      @apply bg-gray-800/95 border-gray-600;
    }

    .lang-option {
      @apply text-gray-300;
    }

    .lang-option:hover:not(.active) {
      @apply bg-gray-700/60 text-gray-100;
    }

    .language-status {
      @apply bg-gray-700/80 text-gray-200 border-gray-500;
    }
  }

  /* Glass morphism effect */
  .language-selector-wrapper {
    @apply backdrop-blur-xl bg-white/80 dark:bg-gray-800/80
    border border-white/20 dark:border-gray-600/30;
  }

  /* Smooth entrance animation */
  .modern-language-switcher {
    @apply animate-[fadeInUp_0.5s_ease-out];
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Pulse animation for active state */
  .lang-option.active {
    @apply animate-[subtlePulse_2s_ease-in-out_infinite];
  }

  @keyframes subtlePulse {
    0%, 100% {
      transform: scale(1.05);
    }
    50% {
      transform: scale(1.08);
    }
  }
}

/* Base styles */
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  color-scheme: light dark;
  @apply text-gray-900 bg-gradient-to-b from-gray-50 to-white;
  @apply dark:text-gray-100 dark:from-gray-900 dark:to-gray-950;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  @apply m-0 flex min-w-[320px] min-h-screen;
}

/* Responsive Link Styles */
a {
  @apply font-medium text-blue-600 hover:text-blue-700 transition-colors duration-200 relative
  after:absolute after:bottom-0 after:left-0 after:w-0 after:h-[1px] after:bg-current 
  after:transition-all after:duration-300 hover:after:w-full
  dark:text-blue-400 dark:hover:text-blue-300;
}

/* Button Styling */
button {
  @apply rounded-lg border border-transparent px-4 py-2 text-sm font-medium bg-blue-600 text-white cursor-pointer 
  transition-all duration-200 hover:bg-blue-700 hover:shadow-md hover:shadow-blue-600/20 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
  active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed
  dark:bg-blue-700 dark:hover:bg-blue-600 dark:hover:shadow-blue-900/30;
}

h1 {
  @apply text-4xl font-bold leading-tight;
}

/* Smooth Scrolling */
html {
  @apply scroll-smooth scroll-pt-8;
}

/* Selection Style */
::selection {
  @apply bg-blue-200 text-inherit;
  @apply dark:bg-blue-800;
}

/* Custom Scrollbar */
@media (min-width: 640px) {
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded;
    @apply dark:bg-gray-800;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded transition-colors;
    @apply dark:bg-gray-600;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
    @apply dark:bg-gray-500;
  }
}

/* Animation Keyframes */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Touch Device Optimizations */
@media (hover: none) {
  .hover-only {
    @apply hidden;
  }
}

  /* Search form specific spacing - Desktop comfortable, Mobile compact */
  .transit-search-form {
    padding: var(--space-6);
    margin: var(--space-4) 0;
  }
  
  .transit-form-header {
    margin-bottom: var(--space-6);
  }
  
  @media (max-width: 768px) {
    .transit-search-form {
      padding: var(--space-4);
      margin: var(--space-2) 0;
    }
    
    .transit-form-header {
      margin-bottom: var(--space-3);
    }
  }
  
  @media (max-width: 640px) {
    .transit-search-form {
      padding: var(--space-3);
      margin: var(--space-2) 0;
    }
    
    .transit-form-header {
      margin-bottom: var(--space-2);
    }
    
    .text-title-2 {
      font-size: 1.25rem;
    }
  }

  /* Apply better connection indicators for the legs */
@screen md {
  .wait-time-indicator::before,
  .wait-time-indicator::after {
    @apply content-[''] h-0.5 bg-gradient-to-r from-gray-300 to-gray-400 w-8 absolute;
  }  .wait-time-indicator::before {
    @apply left-[-32px];
  }
  
  .wait-time-indicator::after {
    @apply right-[-32px];
  }
  
  .legs-container::after {
    @apply content-[''] absolute top-1/2 left-4 right-4 h-0.5 bg-gray-200 dark:bg-gray-700 -z-10;
  }
}
